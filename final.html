<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="description" content="BEST JOURNEY - –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à—É –∑–∞—è–≤–∫—É">
    <meta name="author" content="BEST JOURNEY">
    <meta name="language" content="Russian">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="BEST JOURNEY - –°–ø–∞—Å–∏–±–æ">
    <meta property="og:description" content="–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à—É –∑–∞—è–≤–∫—É –Ω–∞ –ø–æ–¥–±–æ—Ä —Ç—É—Ä–∞">
    <meta property="og:locale" content="ru_RU">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BEST JOURNEY - –°–ø–∞—Å–∏–±–æ">
    <meta name="twitter:description" content="–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à—É –∑–∞—è–≤–∫—É –Ω–∞ –ø–æ–¥–±–æ—Ä —Ç—É—Ä–∞">
    
    <title>–°–ø–∞—Å–∏–±–æ - BEST JOURNEY</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            /* –ó–∞–º–µ–Ω–∏—Ç–µ 'background.jpg' –Ω–∞ –ø—É—Ç—å –∫ –≤–∞—à–µ–º—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é */
            background-image: url('background.jpg');
            background-position: center;
            background-size: cover;
            background-attachment: fixed;
            background-repeat: no-repeat;
            background-color: #0F0F0F;
            color: #FFFFFF;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 15, 15, 0.85);
            z-index: -1;
        }

        /* YouTube-style Header */
        .header {
            background: rgba(33, 33, 33, 0.95);
            backdrop-filter: blur(10px);
            height: 56px;
            display: flex;
            align-items: center;
            padding: 0 16px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header-logo {
            color: #FF0000;
            font-size: 20px;
            font-weight: 700;
            margin-right: 20px;
            cursor: pointer;
        }

        .header-title {
            color: #FFFFFF;
            font-size: 18px;
            font-weight: 500;
            flex: 1;
        }

        /* Main Content Container */
        .main-container {
            max-width: 1280px;
            width: 100%;
            margin: 0 auto;
            padding: 24px 16px;
            background: rgba(15, 15, 15, 0.9);
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: 24px;
            font-weight: 500;
            color: #FFFFFF;
            margin-bottom: 24px;
            text-align: left;
        }

        ul {
            list-style: none;
            padding: 0;
            margin: 0 0 32px 0;
            width: 100%;
        }

        li {
            font-size: 14px;
            color: #AAAAAA;
            padding: 16px;
            margin-bottom: 8px;
            text-align: left;
            background: #212121;
            border-radius: 12px;
            border: 1px solid #303030;
        }

        .tickets-container {
            margin-top: 24px;
            margin-bottom: 32px;
            width: 100%;
        }

        .tickets-container h2 {
            font-size: 20px;
            font-weight: 500;
            color: #FFFFFF;
            margin-bottom: 16px;
            text-align: left;
        }

        .tabs {
            display: flex;
            gap: 0;
            margin-bottom: 24px;
            border-bottom: 1px solid #303030;
            overflow-x: auto;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab-button {
            padding: 12px 16px;
            font-size: 14px;
            font-weight: 500;
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            color: #AAAAAA;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            font-family: 'Roboto', sans-serif;
        }

        .tab-button:hover {
            color: #FFFFFF;
            background: #272727;
        }

        .tab-button.active {
            color: #FFFFFF;
            border-bottom-color: #FF0000;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .tickets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .company-group {
            margin-bottom: 32px;
            width: 100%;
        }

        .company-name {
            font-size: 16px;
            font-weight: 500;
            color: #FFFFFF;
            margin-bottom: 16px;
            padding: 12px 16px;
            border-bottom: 1px solid #303030;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #1a1a1a;
            border-radius: 8px;
            transition: all 0.2s ease;
            user-select: none;
        }

        .company-name:hover {
            background: #272727;
        }

        .company-name::after {
            content: '‚ñº';
            font-size: 12px;
            color: #AAAAAA;
            transition: transform 0.3s ease;
            margin-left: 12px;
        }

        .company-name.expanded::after {
            transform: rotate(180deg);
        }

        .company-tickets-wrapper {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            margin-top: 8px;
        }

        .company-tickets-wrapper.expanded {
            max-height: 5000px;
        }

        .company-tickets-wrapper .tickets-grid {
            padding-top: 8px;
        }

        .ticket-card {
            padding: 20px;
            background: #212121;
            border-radius: 12px;
            border: 1px solid #303030;
            text-align: center;
            transition: all 0.2s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 120px;
        }

        .ticket-card:hover {
            background: #272727;
            border-color: #404040;
            transform: translateY(-2px);
        }

        .ticket-platform {
            font-size: 13px;
            color: #AAAAAA;
            margin-bottom: 8px;
            font-weight: 400;
        }

        .ticket-price {
            font-size: 18px;
            color: #FFFFFF;
            font-weight: 500;
            margin: 8px 0;
        }

        .ticket-date {
            font-size: 13px;
            color: #AAAAAA;
            margin-top: 8px;
            margin-bottom: 12px;
        }

        .ticket-link {
            display: inline-block;
            margin-top: 8px;
            padding: 10px 16px;
            background-color: #FF0000;
            color: #FFFFFF;
            text-decoration: none;
            border-radius: 18px;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s ease;
            width: 100%;
            text-align: center;
            border: none;
            cursor: pointer;
            font-family: 'Roboto', sans-serif;
        }

        .ticket-link:hover {
            background-color: #CC0000;
        }

        .ticket-link:active {
            background-color: #990000;
        }

        p {
            font-size: 14px;
            color: #AAAAAA;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
            margin-bottom: 24px;
            font-weight: 400;
        }

        .success-icon {
            font-size: 48px;
            margin-bottom: 16px;
            color: #FF0000;
            animation: scaleIn 0.5s ease-out;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .info-box {
            background: #212121;
            border-radius: 12px;
            padding: 16px;
            margin: 24px auto;
            max-width: 500px;
            border: 1px solid #303030;
            text-align: left;
        }

        .info-box p {
            font-size: 14px;
            margin-bottom: 8px;
            color: #AAAAAA;
        }

        .info-box p:last-child {
            margin-bottom: 0;
        }

        .home-button {
            margin-top: 24px;
            padding: 10px 16px;
            font-size: 14px;
            font-weight: 500;
            border: none;
            border-radius: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'Roboto', sans-serif;
            background-color: #FF0000;
            color: #FFFFFF;
            display: inline-block;
        }

        .home-button:hover {
            background-color: #CC0000;
        }

        .home-button:active {
            background-color: #990000;
        }

        /* Anex Tour Style Search Block */
        .search-hero {
            padding: 40px 16px;
            margin-bottom: 32px;
            position: relative;
        }

        .search-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 15, 15, 0.5);
            z-index: 0;
        }

        .search-tabs,
        .search-form-container {
            position: relative;
            z-index: 1;
        }

        .search-tabs {
            display: flex;
            gap: 0;
            margin-bottom: 24px;
            border-bottom: 2px solid #404040;
            max-width: 1280px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-tab {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 500;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            color: #AAAAAA;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'Roboto', sans-serif;
            position: relative;
            top: 2px;
        }

        .search-tab:hover {
            color: #FFFFFF;
            background: #272727;
        }

        .search-tab.active {
            color: #FFFFFF;
            border-bottom-color: #FF0000;
        }

        .search-form-container {
            max-width: 1280px;
            margin: 0 auto;
            background: #212121;
            border-radius: 12px;
            padding: 24px;
            border: 1px solid #303030;
        }

        .search-form {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            align-items: end;
        }

        .form-group.date-group {
            grid-column: span 2;
        }

        .search-button {
            grid-column: span 1;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-size: 13px;
            color: #AAAAAA;
            margin-bottom: 8px;
            font-weight: 400;
        }

        .form-group input,
        .form-group select {
            padding: 12px 16px;
            background: #0F0F0F;
            border: 1px solid #303030;
            border-radius: 8px;
            color: #FFFFFF;
            font-size: 14px;
            font-family: 'Roboto', sans-serif;
            transition: all 0.2s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #FF0000;
            background: #1a1a1a;
        }

        .form-group input::placeholder {
            color: #666;
        }

        .search-button {
            padding: 12px 32px;
            background: #FF0000;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'Roboto', sans-serif;
            height: fit-content;
        }

        .search-button:hover {
            background: #CC0000;
        }

        .search-button:active {
            background: #990000;
        }

        .date-inputs {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .date-inputs input {
            flex: 1;
        }

        .date-separator {
            color: #666;
            font-size: 18px;
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 16px;
            }

            h1 {
                font-size: 20px;
            }

            p {
                font-size: 14px;
            }

            li {
                font-size: 14px;
                padding: 12px;
            }

            .tickets-container h2 {
                font-size: 18px;
            }

            .tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .tab-button {
                padding: 10px 12px;
                font-size: 13px;
            }

            .tickets-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .company-name {
                font-size: 15px;
            }

            .ticket-card {
                padding: 12px;
            }

            .ticket-price {
                font-size: 16px;
            }

            .success-icon {
                font-size: 40px;
            }

            .info-box {
                padding: 12px;
            }

            .home-button {
                font-size: 13px;
                padding: 10px 16px;
            }

            .search-hero {
                padding: 24px 16px;
            }

            .search-form-container {
                padding: 16px;
            }

            .search-form {
                grid-template-columns: 1fr;
            }

            .form-group.date-group {
                grid-column: span 1;
            }

            .search-button {
                grid-column: span 1;
            }

            .search-tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .search-tab {
                padding: 10px 16px;
                font-size: 14px;
                white-space: nowrap;
            }

            .date-inputs {
                flex-direction: column;
                gap: 8px;
            }

            .date-separator {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-logo">BEST JOURNEY</div>
        <div class="header-title">–í—ã–±–∏—Ä–∞–π. –ë—Ä–æ–Ω–∏—Ä—É–π. –ü—É—Ç–µ—à–µ—Å—Ç–≤—É–π.</div>
    </div>
    
    <div class="search-hero">
        <div class="search-tabs">
            <button class="search-tab active" data-search-type="tours">–¢—É—Ä—ã</button>
            <button class="search-tab" data-search-type="hotels">–û—Ç–µ–ª–∏</button>
            <button class="search-tab" data-search-type="cruises">–ö—Ä—É–∏–∑—ã</button>
            <button class="search-tab" data-search-type="flights">–ê–≤–∏–∞–±–∏–ª–µ—Ç—ã</button>
        </div>
        <div class="search-form-container">
            <form class="search-form" id="mainSearchForm">
                <div class="form-group">
                    <label for="fromCity">–û—Ç–∫—É–¥–∞</label>
                    <input type="text" id="fromCity" name="fromCity" placeholder="–ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è" list="citiesList" autocomplete="off">
                    <datalist id="citiesList">
                        <option value="–ú–æ—Å–∫–≤–∞">
                        <option value="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥">
                        <option value="–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫">
                        <option value="–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥">
                        <option value="–ö–∞–∑–∞–Ω—å">
                        <option value="–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥">
                        <option value="–ß–µ–ª—è–±–∏–Ω—Å–∫">
                        <option value="–°–∞–º–∞—Ä–∞">
                        <option value="–û–º—Å–∫">
                        <option value="–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É">
                        <option value="–£—Ñ–∞">
                        <option value="–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫">
                        <option value="–í–æ—Ä–æ–Ω–µ–∂">
                        <option value="–ü–µ—Ä–º—å">
                        <option value="–í–æ–ª–≥–æ–≥—Ä–∞–¥">
                        <option value="–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä">
                    </datalist>
                </div>
                <div class="form-group">
                    <label for="destination">–°—Ç—Ä–∞–Ω–∞, –≥–æ—Ä–æ–¥ –∏–ª–∏ –æ—Ç–µ–ª—å</label>
                    <input type="text" id="destination" name="destination" placeholder="–ö—É–¥–∞ —Ö–æ—Ç–∏—Ç–µ –ø–æ–µ—Ö–∞—Ç—å" list="destinationsList" autocomplete="off">
                    <datalist id="destinationsList">
                        <option value="–ú–æ—Å–∫–≤–∞">
                        <option value="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥">
                        <option value="–°–æ—á–∏">
                        <option value="–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä">
                        <option value="–ê–Ω–∞–ø–∞">
                        <option value="–ì–µ–ª–µ–Ω–¥–∂–∏–∫">
                        <option value="–¢—É—Ä—Ü–∏—è">
                        <option value="–ï–≥–∏–ø–µ—Ç">
                        <option value="–û–ê–≠">
                        <option value="–¢–∞–∏–ª–∞–Ω–¥">
                        <option value="–í—å–µ—Ç–Ω–∞–º">
                        <option value="–ì—Ä–µ—Ü–∏—è">
                        <option value="–ò—Å–ø–∞–Ω–∏—è">
                        <option value="–ò—Ç–∞–ª–∏—è">
                        <option value="–ö–∏–ø—Ä">
                        <option value="–ú–∞–ª—å–¥–∏–≤—ã">
                        <option value="–®—Ä–∏-–õ–∞–Ω–∫–∞">
                    </datalist>
                </div>
                <div class="form-group date-group">
                    <label>–î–∞—Ç—ã –≤—ã–ª–µ—Ç–∞</label>
                    <div class="date-inputs">
                        <input type="date" id="departureDate" name="departureDate" min="">
                        <span class="date-separator">‚Äì</span>
                        <input type="date" id="returnDate" name="returnDate" min="">
                    </div>
                </div>
                <div class="form-group" id="nightsGroup">
                    <label for="nights">–ù–æ—á–µ–π</label>
                    <input type="number" id="nights" name="nights" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" min="1" value="7">
                </div>
                <div class="form-group">
                    <label for="tourists">–¢—É—Ä–∏—Å—Ç—ã</label>
                    <select id="tourists" name="tourists">
                        <option value="1">1 –≤–∑—Ä–æ—Å–ª—ã–π</option>
                        <option value="2" selected>2 –≤–∑—Ä–æ—Å–ª—ã—Ö</option>
                        <option value="3">3 –≤–∑—Ä–æ—Å–ª—ã—Ö</option>
                        <option value="4">4 –≤–∑—Ä–æ—Å–ª—ã—Ö</option>
                        <option value="5">5 –≤–∑—Ä–æ—Å–ª—ã—Ö</option>
                        <option value="6">6 –≤–∑—Ä–æ—Å–ª—ã—Ö</option>
                    </select>
                </div>
                <button type="submit" class="search-button">–ù–∞–π—Ç–∏</button>
            </form>
        </div>
    </div>

    <div class="main-container">
        <h1>–í–æ—Ç —á—Ç–æ –º—ã –ø–æ–¥–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å</h1>
        <ul id="resultsList"></ul>
    
    <script>
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã (—Å–µ–≥–æ–¥–Ω—è)
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('departureDate').min = today;
        document.getElementById('returnDate').min = today;
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        document.getElementById('departureDate').addEventListener('change', (e) => {
            const departureDate = e.target.value;
            if (departureDate) {
                document.getElementById('returnDate').min = departureDate;
                // –ï—Å–ª–∏ –¥–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è —Ä–∞–Ω—å—à–µ –¥–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª—è–µ–º –µ—ë
                if (document.getElementById('returnDate').value && document.getElementById('returnDate').value < departureDate) {
                    document.getElementById('returnDate').value = departureDate;
                }
            }
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ –ø–æ–∏—Å–∫–∞
        const searchTabs = document.querySelectorAll('.search-tab');
        const nightsGroup = document.getElementById('nightsGroup');
        
        searchTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                searchTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                const searchType = tab.getAttribute('data-search-type');
                
                // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª–µ "–ù–æ—á–µ–π" –¥–ª—è –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤
                if (searchType === 'flights') {
                    nightsGroup.style.display = 'none';
                } else {
                    nightsGroup.style.display = 'flex';
                }
            });
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –ø–æ–∏—Å–∫–∞
        document.getElementById('mainSearchForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const formData = {
                fromCity: document.getElementById('fromCity').value,
                destination: document.getElementById('destination').value,
                departureDate: document.getElementById('departureDate').value,
                returnDate: document.getElementById('returnDate').value,
                nights: document.getElementById('nights').value,
                tourists: document.getElementById('tourists').value,
                searchType: document.querySelector('.search-tab.active').getAttribute('data-search-type')
            };
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ localStorage
            localStorage.setItem('city', formData.fromCity);
            localStorage.setItem('destination', formData.destination);
            localStorage.setItem('departureDate', formData.departureDate);
            localStorage.setItem('returnDate', formData.returnDate);
            localStorage.setItem('nights', formData.nights);
            localStorage.setItem('tourists', formData.tourists);
            localStorage.setItem('searchType', formData.searchType);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            updateSearchResults(formData);
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
        function updateSearchResults(formData) {
            const resultsList = document.getElementById('resultsList');
            const cityDeclined = declineCity(formData.fromCity);
            const destinationCapitalized = formData.destination.charAt(0).toUpperCase() + formData.destination.slice(1).toLowerCase();
            
            resultsList.innerHTML = '';
            const listItem = document.createElement('li');
            
            if (formData.searchType === 'flights') {
                listItem.textContent = `–ê–≤–∏–∞–±–∏–ª–µ—Ç—ã –∏–∑ ${cityDeclined} –≤ ${destinationCapitalized}`;
            } else if (formData.searchType === 'hotels') {
                listItem.textContent = `–û—Ç–µ–ª–∏ –≤ ${destinationCapitalized}`;
            } else if (formData.searchType === 'cruises') {
                listItem.textContent = `–ö—Ä—É–∏–∑—ã –∏–∑ ${cityDeclined} –≤ ${destinationCapitalized}`;
            } else {
                listItem.textContent = `–¢—É—Ä—ã –∏–∑ ${cityDeclined} –≤ ${destinationCapitalized}`;
            }
            
            resultsList.appendChild(listItem);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –±–∏–ª–µ—Ç–∞–º–∏
            const ticketsContainer = document.querySelector('.tickets-container');
            if (ticketsContainer) {
                ticketsContainer.remove();
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–ª–µ—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –ø–æ–∏—Å–∫–∞
            if (formData.fromCity && formData.destination) {
                if (formData.searchType === 'flights') {
                    loadFlightsResults(formData.fromCity, formData.destination, formData.departureDate);
                } else {
                    loadTicketsResults(formData.fromCity, formData.destination, formData.departureDate);
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤
        function loadFlightsResults(fromCity, toCity, departureDate = null) {
            const ticketsContainer = document.createElement('div');
            ticketsContainer.className = 'tickets-container';
            ticketsContainer.innerHTML = `
                <h2>–°–∞–π—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤</h2>
                <div class="tickets-grid" id="flights-grid"></div>
            `;
            
            const resultsList = document.getElementById('resultsList');
            resultsList.parentNode.insertBefore(ticketsContainer, resultsList.nextSibling);
            
            const flightsGrid = document.getElementById('flights-grid');
            getFlightTickets(fromCity, toCity, departureDate).then(tickets => {
                displayTickets(tickets, flightsGrid, fromCity, toCity);
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –±–∏–ª–µ—Ç–æ–≤ (–ø–æ–µ–∑–¥–∞/—Ç—É—Ä—ã)
        function loadTicketsResults(fromCity, toCity, departureDate = null) {
            const ticketsContainer = document.createElement('div');
            ticketsContainer.className = 'tickets-container';
            ticketsContainer.innerHTML = `
                <h2>–°–∞–π—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –±–∏–ª–µ—Ç–æ–≤</h2>
                <div class="tabs">
                    <button class="tab-button active" data-tab="trains">üöÇ –ü–æ–µ–∑–¥–∞</button>
                    <button class="tab-button" data-tab="flights">‚úàÔ∏è –°–∞–º–æ–ª–µ—Ç—ã</button>
                </div>
                <div class="tab-content active" id="trains-tab">
                    <div class="tickets-grid" id="trains-grid"></div>
                </div>
                <div class="tab-content" id="flights-tab">
                    <div class="tickets-grid" id="flights-grid"></div>
                </div>
            `;
            
            const resultsList = document.getElementById('resultsList');
            resultsList.parentNode.insertBefore(ticketsContainer, resultsList.nextSibling);
            
            const trainsGrid = document.getElementById('trains-grid');
            const flightsGrid = document.getElementById('flights-grid');
            const tabButtons = ticketsContainer.querySelectorAll('.tab-button');
            const tabContents = ticketsContainer.querySelectorAll('.tab-content');
            
            getTrainTickets(fromCity, toCity, departureDate).then(tickets => {
                displayTickets(tickets, trainsGrid, fromCity, toCity);
            });
            
            getFlightTickets(fromCity, toCity, departureDate).then(tickets => {
                displayTickets(tickets, flightsGrid, fromCity, toCity);
            });
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabName = button.getAttribute('data-tab');
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    button.classList.add('active');
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                });
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–ª–æ–Ω–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        function declineCity(cityName) {
            if (!cityName || cityName === '–≤–∞—à –≥–æ—Ä–æ–¥') {
                return cityName;
            }
            
            // –ü—Ä–∏–≤–æ–¥–∏–º –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É (–ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –∑–∞–≥–ª–∞–≤–Ω–∞—è)
            cityName = cityName.charAt(0).toUpperCase() + cityName.slice(1).toLowerCase();
            
            // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏
            const specialCases = {
                '–ú–æ—Å–∫–≤–∞': '–ú–æ—Å–∫–≤—ã',
                '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥': '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞',
                '–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É': '–†–æ—Å—Ç–æ–≤–∞-–Ω–∞-–î–æ–Ω—É',
                '–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥': '–ù–∏–∂–Ω–µ–≥–æ –ù–æ–≤–≥–æ—Ä–æ–¥–∞',
                '–ù–∞–±–µ—Ä–µ–∂–Ω—ã–µ –ß–µ–ª–Ω—ã': '–ù–∞–±–µ—Ä–µ–∂–Ω—ã—Ö –ß–µ–ª–Ω–æ–≤',
                '–í–µ–ª–∏–∫–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥': '–í–µ–ª–∏–∫–æ–≥–æ –ù–æ–≤–≥–æ—Ä–æ–¥–∞',
                '–°—Ç–∞—Ä—ã–π –û—Å–∫–æ–ª': '–°—Ç–∞—Ä–æ–≥–æ –û—Å–∫–æ–ª–∞',
                '–ù–æ–≤—ã–π –£—Ä–µ–Ω–≥–æ–π': '–ù–æ–≤–æ–≥–æ –£—Ä–µ–Ω–≥–æ—è'
            };
            
            if (specialCases[cityName]) {
                return specialCases[cityName];
            }
            
            // –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ —Å–∫–ª–æ–Ω–µ–Ω–∏—è
            if (cityName.endsWith('–∞')) {
                return cityName.slice(0, -1) + '—ã';
            } else if (cityName.endsWith('—è')) {
                return cityName.slice(0, -1) + '–∏';
            } else if (cityName.endsWith('–æ')) {
                return cityName.slice(0, -1) + '–∞';
            } else if (cityName.endsWith('—å')) {
                return cityName.slice(0, -1) + '—è';
            } else if (cityName.endsWith('–π')) {
                return cityName.slice(0, -1) + '—è';
            } else {
                // –î–ª—è –≥–æ—Ä–æ–¥–æ–≤ –Ω–∞ —Å–æ–≥–ª–∞—Å–Ω—É—é –¥–æ–±–∞–≤–ª—è–µ–º -–∞
                return cityName + '–∞';
            }
        }
        
        // –ü–æ–ª—É—á–∞–µ–º –≥–æ—Ä–æ–¥–∞ –∏–∑ localStorage
        let city = localStorage.getItem('city') || '–≤–∞—à –≥–æ—Ä–æ–¥';
        const destination = localStorage.getItem('destination') || '–≤—ã–±—Ä–∞–Ω–Ω—ã–π –≥–æ—Ä–æ–¥';
        
        // –°–∫–ª–æ–Ω—è–µ–º –≥–æ—Ä–æ–¥ –∏ –ø—Ä–∏–≤–æ–¥–∏–º –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É
        const cityDeclined = declineCity(city);
        const destinationCapitalized = destination.charAt(0).toUpperCase() + destination.slice(1).toLowerCase();
        
        // –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫
        const list = document.getElementById('resultsList');
        const listItem = document.createElement('li');
        listItem.textContent = '–ë–∏–ª–µ—Ç—ã –∏–∑ ' + cityDeclined + ' –≤ ' + destinationCapitalized;
        list.appendChild(listItem);
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
        function formatDate(date) {
            const months = ['—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è', 
                          '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'];
            const day = date.getDate();
            const month = months[date.getMonth()];
            const year = date.getFullYear();
            return `${day} ${month} ${year}`;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
        function formatDateForUrl(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IATA –∫–æ–¥–∞ –≥–æ—Ä–æ–¥–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        function getCityCode(cityName) {
            if (!cityName) return cityName;
            
            const cityCodes = {
                '–º–æ—Å–∫–≤–∞': 'MOW',
                '—Å–∞–Ω–∫—Ç-–ø–µ—Ç–µ—Ä–±—É—Ä–≥': 'LED',
                '—Å–ø–±': 'LED',
                '–ø–∏—Ç–µ—Ä': 'LED',
                '–Ω–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫': 'OVB',
                '–µ–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥': 'SVX',
                '–∫–∞–∑–∞–Ω—å': 'KZN',
                '–Ω–∏–∂–Ω–∏–π –Ω–æ–≤–≥–æ—Ä–æ–¥': 'GOJ',
                '—á–µ–ª—è–±–∏–Ω—Å–∫': 'CEK',
                '—Å–∞–º–∞—Ä–∞': 'KUF',
                '–æ–º—Å–∫': 'OMS',
                '—Ä–æ—Å—Ç–æ–≤-–Ω–∞-–¥–æ–Ω—É': 'ROV',
                '—Ä–æ—Å—Ç–æ–≤': 'ROV',
                '—É—Ñ–∞': 'UFA',
                '–∫—Ä–∞—Å–Ω–æ—è—Ä—Å–∫': 'KJA',
                '–≤–æ—Ä–æ–Ω–µ–∂': 'VOZ',
                '–ø–µ—Ä–º—å': 'PEE',
                '–≤–æ–ª–≥–æ–≥—Ä–∞–¥': 'VOG',
                '–∫—Ä–∞—Å–Ω–æ–¥–∞—Ä': 'KRR',
                '—Å–∞—Ä–∞—Ç–æ–≤': 'RTW',
                '—Ç—é–º–µ–Ω—å': 'TJM',
                '—Ç–æ–ª—å—è—Ç—Ç–∏': 'TOF',
                '–∏–∂–µ–≤—Å–∫': 'IJK',
                '—Å–æ—á–∏': 'AER',
                '–∞–Ω–∞–ø–∞': 'AAQ',
                '–≥–µ–ª–µ–Ω–¥–∂–∏–∫': 'GDZ',
                '–º–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–µ –≤–æ–¥—ã': 'MRV',
                '–∫–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥': 'KGD',
                '–≤–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫': 'VVO',
                '—Ö–∞–±–∞—Ä–æ–≤—Å–∫': 'KHV',
                '–∏—Ä–∫—É—Ç—Å–∫': 'IKT',
                '—è–∫—É—Ç—Å–∫': 'YKS',
                '–º–∞—Ö–∞—á–∫–∞–ª–∞': 'MCX',
                '–º–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–µ –≤–æ–¥—ã': 'MRV'
            };
            
            const normalizedName = cityName.toLowerCase().trim();
            return cityCodes[normalizedName] || cityName;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞ –¥–ª—è URL
        function normalizeCityName(cityName) {
            if (!cityName) return '';
            // –ü—Ä–∏–≤–æ–¥–∏–º –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É (–ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –∑–∞–≥–ª–∞–≤–Ω–∞—è)
            return cityName.charAt(0).toUpperCase() + cityName.slice(1).toLowerCase();
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∏–ª–µ—Ç–∞—Ö –Ω–∞ —Å–∞–º–æ–ª–µ—Ç—ã
        async function getFlightTickets(fromCity, toCity, departureDate = null) {
            const platforms = [
                {
                    name: 'Aviasales',
                    link: (from, to, date) => {
                        const fromCode = getCityCode(from);
                        const toCode = getCityCode(to);
                        const dateStr = formatDateForUrl(date);
                        const fromNormalized = normalizeCityName(from);
                        const toNormalized = normalizeCityName(to);
                        
                        // Aviasales –∏—Å–ø–æ–ª—å–∑—É–µ—Ç IATA –∫–æ–¥—ã –µ—Å–ª–∏ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
                        if (fromCode !== from && toCode !== to) {
                            // –ò—Å–ø–æ–ª—å–∑—É–µ–º IATA –∫–æ–¥—ã
                            return `https://www.aviasales.ru/search?origin=${fromCode}&destination=${toCode}&depart_date=${dateStr}&adults=1&children=0&infants=0&currency=rub`;
                        }
                        // –ï—Å–ª–∏ –∫–æ–¥–æ–≤ –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –≥–æ—Ä–æ–¥–æ–≤
                        return `https://www.aviasales.ru/search?origin=${encodeURIComponent(fromNormalized)}&destination=${encodeURIComponent(toNormalized)}&depart_date=${dateStr}&adults=1&children=0&infants=0&currency=rub`;
                    }
                },
                {
                    name: '–Ø–Ω–¥–µ–∫—Å.–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è',
                    link: (from, to, date) => {
                        const dateStr = formatDateForUrl(date);
                        const fromNormalized = normalizeCityName(from);
                        const toNormalized = normalizeCityName(to);
                        // –Ø–Ω–¥–µ–∫—Å.–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã from –∏ to –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤
                        return `https://travel.yandex.ru/avia/?from=${encodeURIComponent(fromNormalized)}&to=${encodeURIComponent(toNormalized)}&when=${dateStr}`;
                    }
                },
                {
                    name: 'OneTwoTrip',
                    link: (from, to, date) => {
                        const dateStr = formatDateForUrl(date);
                        const fromNormalized = normalizeCityName(from);
                        const toNormalized = normalizeCityName(to);
                        // OneTwoTrip –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã from –∏ to
                        return `https://www.onetwotrip.com/ru/flights/search/?from=${encodeURIComponent(fromNormalized)}&to=${encodeURIComponent(toNormalized)}&departureDate=${dateStr}`;
                    }
                },
                {
                    name: 'Ozon Travel',
                    link: (from, to, date) => {
                        const dateStr = formatDateForUrl(date);
                        const fromNormalized = normalizeCityName(from);
                        const toNormalized = normalizeCityName(to);
                        // Ozon Travel - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã from –∏ to
                        return `https://www.ozon.ru/travel/flights/?from=${encodeURIComponent(fromNormalized)}&to=${encodeURIComponent(toNormalized)}&date=${dateStr}`;
                    }
                },
                {
                    name: 'S7 Airlines',
                    link: (from, to, date) => {
                        const dateStr = formatDateForUrl(date);
                        const fromNormalized = normalizeCityName(from);
                        const toNormalized = normalizeCityName(to);
                        // S7 Airlines - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã from –∏ to
                        return `https://www.s7.ru/booking/flights?from=${encodeURIComponent(fromNormalized)}&to=${encodeURIComponent(toNormalized)}&date=${dateStr}`;
                    }
                }
            ];
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞—Ç—É –∏–∑ —Ñ–æ—Ä–º—ã –∏–ª–∏ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
            const searchDate = departureDate ? new Date(departureDate) : new Date();
            if (departureDate) {
                searchDate.setDate(searchDate.getDate());
            } else {
                // –ï—Å–ª–∏ –¥–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞—Ç—É —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π
                searchDate.setDate(searchDate.getDate() + 7);
            }
            
            const ticketsByCompany = {};
            
            // –î–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–µ–º –æ–¥–Ω—É —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–∏—Å–∫
            platforms.forEach((platform) => {
                const link = platform.link(fromCity, toCity, searchDate);
                ticketsByCompany[platform.name] = [{
                    platform: platform.name,
                    link: link,
                    date: formatDate(searchDate),
                    dateObj: searchDate
                }];
            });
            
            return ticketsByCompany;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∏–ª–µ—Ç–∞—Ö –Ω–∞ –ø–æ–µ–∑–¥–∞
        async function getTrainTickets(fromCity, toCity, departureDate = null) {
            const platforms = [
                {
                    name: '–†–ñ–î',
                    link: (from, to, date) => {
                        const dateStr = formatDateForUrl(date);
                        const fromNormalized = normalizeCityName(from);
                        const toNormalized = normalizeCityName(to);
                        return `https://pass.rzd.ru/tickets/public/ru?layer_name=e3-route&st0=${encodeURIComponent(fromNormalized)}&st1=${encodeURIComponent(toNormalized)}&dt0=${dateStr}`;
                    }
                },
                {
                    name: 'Tutu.ru',
                    link: (from, to, date) => {
                        const dateStr = formatDateForUrl(date);
                        const fromNormalized = normalizeCityName(from);
                        const toNormalized = normalizeCityName(to);
                        return `https://www.tutu.ru/poezda/?from=${encodeURIComponent(fromNormalized)}&to=${encodeURIComponent(toNormalized)}&date=${dateStr}`;
                    }
                },
                {
                    name: '–Ø–Ω–¥–µ–∫—Å.–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è',
                    link: (from, to, date) => {
                        const dateStr = formatDateForUrl(date);
                        const fromNormalized = normalizeCityName(from);
                        const toNormalized = normalizeCityName(to);
                        return `https://travel.yandex.ru/trains/?from=${encodeURIComponent(fromNormalized)}&to=${encodeURIComponent(toNormalized)}&when=${dateStr}`;
                    }
                },
                {
                    name: 'Ozon Travel',
                    link: (from, to, date) => {
                        const dateStr = formatDateForUrl(date);
                        const fromNormalized = normalizeCityName(from);
                        const toNormalized = normalizeCityName(to);
                        return `https://www.ozon.ru/travel/trains/?from=${encodeURIComponent(fromNormalized)}&to=${encodeURIComponent(toNormalized)}&date=${dateStr}`;
                    }
                },
                {
                    name: '–ü–æ–µ–∑–¥.—Ä—É',
                    link: (from, to, date) => {
                        const dateStr = formatDateForUrl(date);
                        const fromNormalized = normalizeCityName(from);
                        const toNormalized = normalizeCityName(to);
                        return `https://poezd.ru/search/?from=${encodeURIComponent(fromNormalized)}&to=${encodeURIComponent(toNormalized)}&date=${dateStr}`;
                    }
                }
            ];
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞—Ç—É –∏–∑ —Ñ–æ—Ä–º—ã –∏–ª–∏ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
            const searchDate = departureDate ? new Date(departureDate) : new Date();
            if (departureDate) {
                searchDate.setDate(searchDate.getDate());
            } else {
                // –ï—Å–ª–∏ –¥–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞—Ç—É —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π
                searchDate.setDate(searchDate.getDate() + 7);
            }
            
            const ticketsByCompany = {};
            
            // –î–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–µ–º –æ–¥–Ω—É —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–∏—Å–∫
            platforms.forEach((platform) => {
                const link = platform.link(fromCity, toCity, searchDate);
                ticketsByCompany[platform.name] = [{
                    platform: platform.name,
                    link: link,
                    date: formatDate(searchDate),
                    dateObj: searchDate
                }];
            });
            
            return ticketsByCompany;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –∫–æ–º–ø–∞–Ω–∏—è–º
        function displayTickets(ticketsByCompany, container, fromCity, toCity) {
            container.innerHTML = '';
            
            // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
            Object.keys(ticketsByCompany).forEach(companyName => {
                const companyTickets = ticketsByCompany[companyName];
                
                // –°–æ–∑–¥–∞–µ–º –≥—Ä—É–ø–ø—É –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏
                const companyGroup = document.createElement('div');
                companyGroup.className = 'company-group';
                
                // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–º–ø–∞–Ω–∏–∏
                const companyHeader = document.createElement('div');
                companyHeader.className = 'company-name';
                companyHeader.innerHTML = `<span>${companyName}</span>`;
                companyGroup.appendChild(companyHeader);
                
                // –°–æ–∑–¥–∞–µ–º –æ–±–µ—Ä—Ç–∫—É –¥–ª—è –±–∏–ª–µ—Ç–æ–≤ (–¥–ª—è –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞)
                const ticketsWrapper = document.createElement('div');
                ticketsWrapper.className = 'company-tickets-wrapper';
                
                // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –±–∏–ª–µ—Ç–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏
                const ticketsContainer = document.createElement('div');
                ticketsContainer.className = 'tickets-grid';
                
                // –î–æ–±–∞–≤–ª—è–µ–º –±–∏–ª–µ—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏ (—É–∂–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–∞—Ç–µ)
                companyTickets.forEach(ticket => {
                    const ticketCard = document.createElement('div');
                    ticketCard.className = 'ticket-card';
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –≤–∞–ª–∏–¥–Ω–∞ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å http/https
                    let ticketLink = ticket.link;
                    if (!ticketLink || typeof ticketLink !== 'string' || !ticketLink.startsWith('http')) {
                        // –ò—Å–ø–æ–ª—å–∑—É–µ–º Google –ø–æ–∏—Å–∫ –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç —Å –¥–∞—Ç–æ–π –∏ –∫–æ–º–ø–∞–Ω–∏–µ–π
                        ticketLink = 'https://www.google.com/search?q=' + encodeURIComponent(`${companyName} –±–∏–ª–µ—Ç—ã ${fromCity} ${toCity} ${ticket.date}`);
                    }
                    
                    // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≤–∞–ª–∏–¥–Ω–∞
                    ticketLink = ticketLink.trim();
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
                    try {
                        new URL(ticketLink);
                    } catch (e) {
                        // –ï—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º Google –ø–æ–∏—Å–∫
                        ticketLink = 'https://www.google.com/search?q=' + encodeURIComponent(`${companyName} –±–∏–ª–µ—Ç—ã ${fromCity} ${toCity} ${ticket.date}`);
                    }
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∞–π—Ç –±–µ–∑ —Ü–µ–Ω—ã
                    ticketCard.innerHTML = `
                        <div class="ticket-date">–î–∞—Ç–∞ –ø–æ–∏—Å–∫–∞: ${ticket.date}</div>
                        <a href="${ticketLink}" target="_blank" rel="noopener noreferrer" class="ticket-link">–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç ${companyName}</a>
                    `;
                    ticketsContainer.appendChild(ticketCard);
                });
                
                ticketsWrapper.appendChild(ticketsContainer);
                companyGroup.appendChild(ticketsWrapper);
                container.appendChild(companyGroup);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
                companyHeader.addEventListener('click', () => {
                    const isExpanded = companyHeader.classList.contains('expanded');
                    if (isExpanded) {
                        companyHeader.classList.remove('expanded');
                        ticketsWrapper.classList.remove('expanded');
                    } else {
                        companyHeader.classList.add('expanded');
                        ticketsWrapper.classList.add('expanded');
                    }
                });
            });
        }
        
        // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É –ø–æ–∏—Å–∫–∞ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ localStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        const savedCity = localStorage.getItem('city');
        const savedDestination = localStorage.getItem('destination');
        const savedDepartureDate = localStorage.getItem('departureDate');
        const savedReturnDate = localStorage.getItem('returnDate');
        const savedNights = localStorage.getItem('nights');
        const savedTourists = localStorage.getItem('tourists');
        const savedSearchType = localStorage.getItem('searchType');
        
        if (savedCity) {
            document.getElementById('fromCity').value = savedCity;
        }
        if (savedDestination) {
            document.getElementById('destination').value = savedDestination;
        }
        if (savedDepartureDate) {
            document.getElementById('departureDate').value = savedDepartureDate;
        }
        if (savedReturnDate) {
            document.getElementById('returnDate').value = savedReturnDate;
        }
        if (savedNights) {
            document.getElementById('nights').value = savedNights;
        }
        if (savedTourists) {
            document.getElementById('tourists').value = savedTourists;
        }
        if (savedSearchType) {
            const searchTab = document.querySelector(`[data-search-type="${savedSearchType}"]`);
            if (searchTab) {
                searchTabs.forEach(t => t.classList.remove('active'));
                searchTab.classList.add('active');
                if (savedSearchType === 'flights') {
                    nightsGroup.style.display = 'none';
                } else {
                    nightsGroup.style.display = 'flex';
                }
            }
        }
        
        // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∏–ª–µ—Ç–∞—Ö –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º
        if (city !== '–≤–∞—à –≥–æ—Ä–æ–¥' && destination !== '–≤—ã–±—Ä–∞–Ω–Ω—ã–π –≥–æ—Ä–æ–¥') {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            const searchType = savedSearchType || 'tours';
            const departureDate = savedDepartureDate || null;
            if (searchType === 'flights') {
                loadFlightsResults(city, destination, departureDate);
            } else {
                loadTicketsResults(city, destination, departureDate);
            }
        }
    </script>
    </div>
</body>
</html>
